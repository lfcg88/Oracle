<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0119)http://asktom.oracle.com/pls/ask/f?p=4950:8:1524001::NO::F4950_P8_DISPLAYID,F4950_P8_CRITERIA:1143536458435,%7Bblock%7D -->
<HTML><HEAD><TITLE>Question Details [ID: 1143536458435]</TITLE>
<META http-equiv=Content-Type content="text/html; charset=iso-8859-1">
<SCRIPT language=JavaScript1.1>
<!-- 
function redirect( where )
{
  location.href=where;
}
function doSubmit( r )
{

 document.wwv_flow.p_request.value = r;
 document.wwv_flow.submit();
}

function first_field()
{
  document.wwv_flow.p_t01.focus();
  return;
}
//-->
</SCRIPT>

<STYLE type=text/css>.nounderline {
	TEXT-DECORATION: none
}
BODY {
	FONT-SIZE: x-small; FONT-FAMILY: Arial, Helvetica, Geneva, sans-serif; BACKGROUND-COLOR: #ffffff
}
A.titleLink {
	FONT-SIZE: 85%
}
SPAN.highlight {
	FONT-WEIGHT: normal
}
SPAN.red1 {
	PADDING-RIGHT: 5px; FONT-SIZE: 110%; COLOR: red
}
UL.titlePage {
	PADDING-LEFT: 0.5em; FONT-SIZE: 80%; MARGIN-LEFT: 0.5em; TEXT-INDENT: -1em; FONT-FAMILY: arial,sans-serif; LIST-STYLE-TYPE: none
}
UL.titlePage LI {
	PADDING-BOTTOM: 10px
}
</STYLE>
<LINK href="howmanyrowsblockcontains_arquivos/platform2.css" type=text/css 
rel=stylesheet>
<META content="MSHTML 5.50.4134.600" name=GENERATOR></HEAD>
<BODY bgColor=#ffffff leftMargin=0 topMargin=0 rightMargin=0 MARGINHEIGHT="0" 
MARGINWIDTH="0">
<FORM name=wwv_flow action=FLOWS.wwv_flow.accept method=post><INPUT type=hidden 
value=4950 name=p_flow_id><INPUT type=hidden value=8 name=p_flow_step_id><INPUT 
type=hidden value=1524001 name=p_instance><INPUT type=hidden value=32805857 
name=p_page_submission_id><INPUT type=hidden name=p_request> 
<TABLE cellSpacing=1 cellPadding=1 width="100%" border=0>
  <TBODY>
  <TR>
    <TD></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD rowSpan=2><A 
      href="http://asktom.oracle.com/pls/ask/f?p=4950:1:1524001"><IMG height=90 
      alt=Home hspace=10 src="howmanyrowsblockcontains_arquivos/asktom.gif" 
      width=156 vspace=10 border=0></A></TD>
    <TD></TD>
    <TD vAlign=top align=right colSpan=20>
      <TABLE cellSpacing=0 cellPadding=0 border=0>
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;</TD>
          <TD vAlign=top align=middle width="1%"><A 
            href="http://asktom.oracle.com/pls/ask/f?p=4950:8:1524001::NO::LAST_PAGE:8:YES"><IMG 
            height=32 alt=ViewForPrinting 
            src="howmanyrowsblockcontains_arquivos/wwv_print.gif" width=32 
            border=0></A><BR><FONT face=verdana color=brown 
            size=1>&nbsp;Print&nbsp;</FONT></TD>
          <TD vAlign=top align=middle width="1%"><A 
            href="http://asktom.oracle.com/pls/ask/f?p=4950:109:1524001::NO::LAST_PAGE:8"><IMG 
            height=32 alt=Print 
            src="howmanyrowsblockcontains_arquivos/wwv_help.gif" width=32 
            border=0></A><BR><FONT face=verdana color=brown 
            size=1>&nbsp;Help&nbsp;</FONT></TD></TR></TBODY></TABLE></TD></TR>
  <TR>
    <TD width="98%">&nbsp;</TD>
    <TD vAlign=bottom align=right>
      <TABLE cellSpacing=0 cellPadding=0 border=0>
        <TBODY>
        <TR>
          <TD>&nbsp;&nbsp;</TD>
          <TD vAlign=top align=left width="1%" bgColor=#cccccc><IMG height=21 
            src="howmanyrowsblockcontains_arquivos/ctab_open3.gif" width=13 
            border=0></TD>
          <TD width="1%" bgColor=#cccccc><A 
            href="http://asktom.oracle.com/pls/ask/f?p=4950:1:1524001::NO"><FONT 
            class=nounderline face=Arial color=#000000 
            size=-1>Questions</FONT></A></TD>
          <TD vAlign=top align=right width="1%" bgColor=#cccccc><IMG height=21 
            src="howmanyrowsblockcontains_arquivos/ctab_close3.gif" width=10 
            border=0></TD>
          <TD vAlign=top align=left width="1%" bgColor=#ff0000><IMG height=21 
            src="howmanyrowsblockcontains_arquivos/tab_open3.gif" width=18 
            border=0></TD>
          <TD width="1%" bgColor=#ff0000><B><FONT class=nounderline face=Arial 
            color=#ffffff size=-1>Search/Archives</FONT></B></TD>
          <TD vAlign=top align=right width="1%" bgColor=#ff0000><IMG height=21 
            src="howmanyrowsblockcontains_arquivos/tab_close3.gif" width=12 
            border=0></TD></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD vAlign=top align=left width="5%" bgColor=#ff0000>&nbsp;</TD>
    <TD noWrap width="1%" bgColor=#ff0000>&nbsp;<B><A 
      href="javascript:doSubmit('Search');"><FONT class=nounderline face=Arial 
      color=#ffffff size=-1>Search</FONT></A></B>&nbsp;</TD>
    <TD width="1%" bgColor=#ff0000><IMG 
      src="howmanyrowsblockcontains_arquivos/subtab3.gif"></TD>
    <TD noWrap width="1%" bgColor=#ff0000>&nbsp;<B><A 
      href="javascript:doSubmit('Archives');"><FONT class=nounderline face=Arial 
      color=#ffffff size=-1>Archives</FONT></A></B>&nbsp;</TD>
    <TD width="1%" bgColor=#ff0000><IMG 
      src="howmanyrowsblockcontains_arquivos/subtab3.gif"></TD>
    <TD noWrap width="1%" bgColor=#ff0000>&nbsp;<B><FONT 
      color=white>[&nbsp;</FONT><FONT class=underline face=Arial color=white 
      size=-1>Question&nbsp;Details</FONT><FONT 
    color=white>&nbsp;]</FONT></B>&nbsp;</TD>
    <TD width="1%" bgColor=#ff0000><IMG 
      src="howmanyrowsblockcontains_arquivos/subtab3.gif"></TD>
    <TD vAlign=center align=left width="94%" bgColor=#ff0000 
    height=25>&nbsp;</TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD vAlign=top align=right width=30 bgColor=#ff0000><IMG height=17 
      src="howmanyrowsblockcontains_arquivos/left_end_bottom3.gif" width=30></TD>
    <TD vAlign=top align=right width="100%" bgColor=#ffffff height=17><IMG 
      height=6 src="howmanyrowsblockcontains_arquivos/bottom_middle.gif" 
      width="100%"></TD>
    <TD vAlign=top align=left width=5 bgColor=#ffffff height=17><IMG height=7 
      src="howmanyrowsblockcontains_arquivos/right_end_bottom.gif" 
  width=5></TD></TR></TBODY></TABLE>
<TABLE width="100%">
  <TBODY>
  <TR>
    <TD width="2%">&nbsp; </TD>
    <TD width="98%"><SPAN style="FONT-SIZE: x-small">
      <TABLE width="100%">
        <TBODY>
        <TR>
          <TD vAlign=top>
            <TABLE width="98%">
              <TBODY>
              <TR>
                <TD align=left></TD>
                <TD align=right></TD></TR></TBODY></TABLE>
            <TABLE border=0>
              <TBODY>
              <TR>
                <TD></TD>
                <TD noWrap align=left><INPUT type=hidden value=26896009627 
                  name=p_arg_names> <INPUT type=hidden value=1143536458435 
                  name=p_t01> </TD></TR>
              <TR>
                <TD></TD>
                <TD noWrap align=left><INPUT type=hidden value=27133775492 
                  name=p_arg_names> <INPUT type=hidden value={block} name=p_t02> 
                </TD></TR></TBODY></TABLE>play -- Thanks for the question regarding 
            "How can I know how many rows a block contains", version 
            8.1.7<BR><FONT size=-1>originally submitted on 9-aug-2001 13pm 
            eastern time, lasted updated 9-aug-2001 14pm</FONT>
            <HR>
            <FONT color=red><I><B>You Asked</B></I></FONT><BR><PRE>Tom

An interesting question

a.How can I know how many rows does a data block contain, and how do I determine 
the ideal size for a particular database. what are the parameters taken into 
consideration.

b.How can I know how many data blocks a segment , and an index contain.

c.How can I know into how many blocks a particular row has chained.

i.e. i want to get a list of blocks into which a particualr row has chained or 
migrated, how can I do it.

d.How can I know how many rows have chained or migrated in a particular segment.

e.can a row chain into multiple blocks spread across multiple tablespaces

f.how can I know how many rows have chained , and how many rows have migrated.

can chaining occur with rollback data blocks?
 </PRE>
            <HR>
            <FONT color=red><I><B>and we said...</B></I></FONT><BR><PRE>a) you cannot really.  You can find the AVERAGE by using analyze -- but unless 
you actually dump the block in ascii to a trace file and edit the trace file, 
you do not know how many rows are in a block.


In the very special case where you have a table with NO chained/migrated rows -- 
you can use:


ops$tkyte@ORA817.US.ORACLE.COM&gt; select dbms_rowid.ROWID_BLOCK_NUMBER( rowid ), 
count(*) 
  2    from t
  3   group by dbms_rowid.ROWID_BLOCK_NUMBER( rowid )
  4  /

DBMS_ROWID.ROWID_BLOCK_NUMBER(ROWID)   COUNT(*)
------------------------------------ ----------
                                8586        662
                                8587        662
....


b) see

</PRE><A 
            href="http://asktom.oracle.com/pls/ask/f?p=4950:8:::::F4950_P8_DISPLAYID:231414051079">http://asktom.oracle.com/pls/ask/f?p=4950:8:::::F4950_P8_DISPLAYID:231414051079</A><PRE>
c) 

You can measure how many table fetch continued rows it takes to retrieve the 
entire row.  For example:

ops$tkyte@ORA817.US.ORACLE.COM&gt; create table t ( x int,
  2                                   a varchar2(4000),
  3                                   b varchar2(4000),
  4                                   c varchar2(4000),
  5                                   d varchar2(4000),
  6                                   e varchar2(4000) );

Table created.


ops$tkyte@ORA817.US.ORACLE.COM&gt; create or replace procedure how_many_blocks
  2  as
  3          l_before number;
  4          l_total  number;
  5  begin
  6     select b.value into l_before
  7       from v$statname a, v$mystat b
  8      where a.statistic# = b.statistic#
  9        and a.name = 'table fetch continued row';
 10  
 11     for x in ( select * from t )
 12     loop
 13          null;
 14     end loop;
 15  
 16     select b.value-l_before into l_total
 17       from v$statname a, v$mystat b
 18      where a.statistic# = b.statistic#
 19        and a.name = 'table fetch continued row';
 20  
 21     dbms_output.put_line( 'Row is now on ' || (l_total + 1) || ' blocks' );
 22  end;
 23  /
Procedure created.

ops$tkyte@ORA817.US.ORACLE.COM&gt; insert into t (x) values (1);
1 row created.

ops$tkyte@ORA817.US.ORACLE.COM&gt; commit;
Commit complete.

ops$tkyte@ORA817.US.ORACLE.COM&gt; exec how_many_blocks
Row is now on 1 blocks
PL/SQL procedure successfully completed.

ops$tkyte@ORA817.US.ORACLE.COM&gt; update t set a = rpad( '*', 4000, '*' );
1 row updated.

ops$tkyte@ORA817.US.ORACLE.COM&gt; commit;
Commit complete.

ops$tkyte@ORA817.US.ORACLE.COM&gt; exec how_many_blocks
Row is now on 1 blocks
PL/SQL procedure successfully completed.

ops$tkyte@ORA817.US.ORACLE.COM&gt; update t set b = rpad( '*', 4000, '*' );
1 row updated.

ops$tkyte@ORA817.US.ORACLE.COM&gt; commit;
Commit complete.

ops$tkyte@ORA817.US.ORACLE.COM&gt; exec how_many_blocks
Row is now on 2 blocks

<B>This shows that when the row exceeded 8000 bytes (i have an 8k block size), it 
starting chaining...</B>

PL/SQL procedure successfully completed.

ops$tkyte@ORA817.US.ORACLE.COM&gt; update t set c = rpad( '*', 4000, '*' );
1 row updated.

ops$tkyte@ORA817.US.ORACLE.COM&gt; commit;
Commit complete.

ops$tkyte@ORA817.US.ORACLE.COM&gt; exec how_many_blocks
Row is now on 3 blocks

PL/SQL procedure successfully completed.

ops$tkyte@ORA817.US.ORACLE.COM&gt; 
ops$tkyte@ORA817.US.ORACLE.COM&gt; update t set d = rpad( '*', 4000, '*' );

1 row updated.

ops$tkyte@ORA817.US.ORACLE.COM&gt; commit;

Commit complete.

ops$tkyte@ORA817.US.ORACLE.COM&gt; exec how_many_blocks
Row is now on 4 blocks

PL/SQL procedure successfully completed.

ops$tkyte@ORA817.US.ORACLE.COM&gt; 
ops$tkyte@ORA817.US.ORACLE.COM&gt; update t set e = rpad( '*', 4000, '*' );

1 row updated.

ops$tkyte@ORA817.US.ORACLE.COM&gt; commit;

Commit complete.

ops$tkyte@ORA817.US.ORACLE.COM&gt; exec how_many_blocks
Row is now on 5 blocks

PL/SQL procedure successfully completed.



d) analyze table list chained rows....

e) no, it'll be in A tablespace.  a segment is always in A tablespace

f) there is no real difference between the two -- they are both chained rows, 
just for different reasons.

You can tell if a row is migrated IF the sum of the vsizes of the columns 
indicate it could fit on a block.  A row is chained otherwise.

lastly -- that doesn't make sense since rollback is rollback -- its not rows and 
columns in a table and chaining only applies to rows and columns of a table.
 </PRE>
            <TABLE border=0>
              <TBODY>
              <TR>
                <TD></TD>
                <TD noWrap align=left><INPUT type=hidden value=17708687878 
                  name=p_arg_names> <INPUT type=hidden value=N name=p_t03> 
              </TD></TR></TBODY></TABLE>Was this response helpful to you? <A 
            href="http://asktom.oracle.com/pls/ask/f?p=4950:9:1524001::NO:9:F4950_P9_DISPLAYID:1143536458435">Let 
            us know!</A> 
            <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
              <TBODY>
              <TR>
                <TD vAlign=top align=left width="1%" bgColor=#cccccc><IMG 
                  height=5 src="howmanyrowsblockcontains_arquivos/FFFFFFTL.gif" 
                  width=5></TD>
                <TD vAlign=center align=left width="90%" 
                  bgColor=#cccccc>&nbsp;&nbsp;<FONT face=Arial 
                  color=white><B>Reviews</B></FONT></TD>
                <TD vAlign=top align=right width="10%" 
                  bgColor=#cccccc>&nbsp;&nbsp;&nbsp;</TD>
                <TD vAlign=top align=right width="1%" bgColor=#cccccc><IMG 
                  height=5 src="howmanyrowsblockcontains_arquivos/FFFFFFTR.gif" 
                  width=5></TD></TR>
              <TR>
                <TD bgColor=#ffffff colSpan=4>
                  <HR noShade SIZE=5>
                  <FONT face=verdana,arial,helvetica size=-1><IMG 
                  src="howmanyrowsblockcontains_arquivos/stars5.gif"><B>Wonderful 
                  answer</B>&nbsp;&nbsp;August 09, 2001 <BR>Reviewer:&nbsp; 
                  <B>A&nbsp;reader</B> </FONT><BR><PRE> 
</PRE><BR></TD></TR>
              <TR>
                <TD vAlign=bottom align=left width="1%" bgColor=#ffffff><IMG 
                  height=5 src="howmanyrowsblockcontains_arquivos/FFFFFFBL.gif" 
                  width=5 border=0></TD>
                <TD width="98%" bgColor=#ffffff colSpan=2 height=1><IMG 
                  height=1 src="howmanyrowsblockcontains_arquivos/blank.gif" 
                  width=1 border=0></TD>
                <TD vAlign=bottom align=right width="1%" bgColor=#ffffff><IMG 
                  height=5 src="howmanyrowsblockcontains_arquivos/FFFFFFBR.gif" 
                  width=5 border=0></TD></TR></TBODY></TABLE>
            <P>Bookmark this page with the link <B><A 
            href="http://asktom.oracle.com/pls/ask/f?p=4950:8:::::F4950_P8_DISPLAYID:1143536458435">HERE</A><B> 
            </B></B></P></TD>
          <TD vAlign=top>
            <TABLE cellSpacing=0 cellPadding=0 border=0>
              <TBODY>
              <TR>
                <TD vAlign=top width=4 bgColor=#ff0000 rowSpan=2><IMG 
                  height=18 src="howmanyrowsblockcontains_arquivos/tl_img.gif" 
                  width=4 border=0></TD>
                <TD bgColor=#000000 height=1><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=142 
                  border=0></TD>
                <TD vAlign=top width=4 bgColor=#ff0000 rowSpan=2><IMG 
                  height=18 src="howmanyrowsblockcontains_arquivos/tr_img.gif" 
                  width=4 border=0></TD></TR>
              <TR>
                <TD bgColor=#ff0000 height=16>
                  <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
                    <TBODY>
                    <TR>
                      <TD vAlign=top align=middle>
                        <DIV align=center><SPAN 
                        style="FONT-SIZE: small; COLOR: #ffffff">Information</SPAN></DIV></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 border=0>
              <TBODY>
              <TR>
                <TD width=1 bgColor=#000000 height=96><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=1 
                  border=0></TD>
                <TD vAlign=top height=96><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=146 
                  border=0><BR>
                  <TABLE cellSpacing=0 cellPadding=1 width=146 border=0>
                    <TBODY>
                    <TR>
                      <TD colSpan=2>
                        <TABLE cellSpacing=0 cellPadding=2 width=124 border=0>
                          <TBODY>
                          <TR>
                            <TD>&nbsp;</TD>
                            <TD vAlign=top width=106>
                              <P><SPAN style="FONT-SIZE: xx-small">This page 
                              provides the details of the question asked. To 
                              find another question click on the search tab. To 
                              view the question archives by week click on the 
                              archives tab.</SPAN> 
                    </P></TD></TR></TBODY></TABLE></TR></TBODY></TABLE></TD>
                <TD width=1 bgColor=#000000 height=96><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=1 
                  border=0></TD>
                <TD width=1 bgColor=#9a9c9a height=96><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=1 
                  border=0></TD>
                <TD width=1 bgColor=#b3b4b3 height=96><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=1 
                  border=0></TD></TR></TBODY></TABLE>
            <TABLE cellSpacing=0 cellPadding=0 border=0>
              <TBODY>
              <TR>
                <TD vAlign=top width=4 rowSpan=4><IMG height=6 
                  src="howmanyrowsblockcontains_arquivos/bl_img.gif" width=4 
                  border=0></TD>
                <TD bgColor=#ffffff height=2><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=142 
                  border=0></TD>
                <TD vAlign=top width=4 rowSpan=4><IMG height=6 
                  src="howmanyrowsblockcontains_arquivos/br_img.gif" width=4 
                  border=0></TD></TR>
              <TR>
                <TD width=1 bgColor=#000000><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=1 
                  border=0></TD></TR>
              <TR>
                <TD width=1 bgColor=#9a9c9a><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=1 
                  border=0></TD></TR>
              <TR>
                <TD width=1 bgColor=#b3b4b3 height=2><IMG height=1 
                  src="howmanyrowsblockcontains_arquivos/stretch.gif" width=1 
                  border=0></TD></TR></TBODY></TABLE></TD></TR></TBODY></TABLE></SPAN></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>
  <TBODY>
  <TR>
    <TD vAlign=bottom width="99%">&nbsp;</TD>
    <TD vAlign=bottom align=right width="1%"><IMG 
      src="howmanyrowsblockcontains_arquivos/bottomredright.gif"></TD></TR></TBODY></TABLE>
<TABLE cellSpacing=0 cellPadding=0 width="100%" bgColor=#ff0000 border=0>
  <TBODY>
  <TR>
    <TD align=middle width="100%"><B><FONT face=arial color=white 
      size=-2>Copyright&nbsp;©&nbsp;2001&nbsp;Oracle&nbsp;Corporation,&nbsp;All&nbsp;rights&nbsp;reserved. 
      </FONT></B></TD></TR>
  <TR>
    <TD colSpan=3><IMG height=5 
      src="howmanyrowsblockcontains_arquivos/bottom_middle.gif" 
  width="100%"></TD></TR></TBODY></TABLE><INPUT type=hidden 
name=p_md5_checksum></FORM></BODY></HTML>
